---
slug: "uuid"
title: "UUID - всемирно уникальный идентификатор"
description: "Исследуем различные методы генерации UUID, доступные форматы и версии. Кроме того, мы обсудим недостатки проверки UUID с помощью регулярных выражений и реальный случай применения UUID для поимки преступника."
summary: "Исследуем различные методы генерации UUID, доступные форматы и версии. Кроме того, мы обсудим недостатки проверки UUID с помощью регулярных выражений и реальный случай применения UUID для поимки преступника."
image: "../posts/uuid.jpg"
date: 2024-05-27
tags: [security how_it_works]
---

![UUID - всемирно уникальный идентификатор](../../posts/uuid.jpg "UUID - всемирно уникальный идентификатор")

### Что такое UUID?
_UUID (universally unique identifier_, всемирно уникальный идентификатор) — это стандарт идентификации, используемый в разработке программного обеспечения для создания уникальных и неизменяемых значений. Он был разработан_ Open Software Foundation (OSF)_ как часть своей среды распределенных вычислений _DCE_.

Основная цель _UUID_ — предоставить распределенным системам возможность уникальной идентификации информации без необходимости в централизованном органе управления. Это означает, что любой может создать _UUID_ и использовать его для идентификации чего-либо с высокой степенью уверенности в том, что этот идентификатор не будет случайно использован для чего-то еще.

Наиболее распространенным использованием стандарта _UUID_ является _Globally Unique Identifier (GUID)_, используемый компанией _Microsoft_. Другими крупными пользователями являются _Linux_ (файловая система _ext2/ext3_, зашифрованные разделы _LUKS_, рабочие среды _GNOME_ и _KDE_) и _Mac OS X_. Все они используют реализацию, полученную из библиотеки _uuid_ из пакета _e2fsprogs_.


### Формат
UUID состоит из 32 шестнадцатеричных символов, разделенных дефисами на пять групп в формате 8-4-4-4-12. Такое представление занимает 36 символов:
![UUID - всемирно уникальный идентификатор](../../posts/uuid-1.png "UUID - всемирно уникальный идентификатор")

4 бита M обозначают версию («version») UUID, а 1-3 старших бита N обозначают вариант («variant») UUID.

Такое разделение на группы основано на структуре UUID:
![UUID - всемирно уникальный идентификатор](../../posts/uuid-2.png "UUID - всемирно уникальный идентификатор")


### Варианты генерации

Существует два варианта генерации _UUID_:
- Вариант 1: Генерируется случайным образом и использует версию 4.
- Вариант 2: Использует временную метку и _MAC-адрес_ узла для генерации версий 1, 2 и 3.

### Версии
- Версия 1: Генерируется на основе времени и _MAC-адреса_ узла.
- Версия 2: Генерируется на основе времени, _MAC-адреса_ узла и домена (_DNS_).
- Версия 3: Генерируется путем хэширования домена (_DNS_) и имени.
- Версия 4: Генерируется случайным образом.
- Версия 5: Генерируется путем хэширования домена (_DNS_) и имени, а также путем добавления случайного компонента.

### Стандарты

_RFC 4122_ - это стандарт, который определяет формат и использование _UUID_. Он описывает структуру, синтаксис и семантику _UUID_. _RFC 4122_ также определяет различные версии и варианты _UUID_.

![UUID - всемирно уникальный идентификатор](../../posts/uuid-3.jpg "UUID - всемирно уникальный идентификатор")

### Валидации
Регулярные выражения не являются надежным методом проверки _UUID_, потому что они могут пропустить недействительные _UUID_ и принять действительные _UUID_ за недействительные. Например, следующее регулярное выражение проверяет только формат _UUID_, но не проверяет версию или вариант:

```sh
^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$
```
Это регулярное выражение примет недействительный _UUID_, такой как _12345678-90ab-cdef-1234-56789abc_, который имеет правильный формат, но неправильную версию и вариант.

```sh
/\A\h{8}-\h{4}-\h{4}-[89AB]\h{3}-\h{12}\z/i  
```
Это регулярное выражение не позволит пройти проверку _UUID_ версии 1 с нечетными девятыми октетами и шестым октетом, не равным 4 или 5.
Это связано с тем, что регулярное выражение проверяет, является ли девятый октет одним из 89AB, а в данном _UUID_ девятый октет равен 2.


Если вам нужно проверить UUID на соответствие любой версии, можно использовать следующее более общее регулярное выражение:
```sh
/\A\h{8}-\h{4}-\h{4}-\h{4}-\h{12}\z/i
```

Рекомендуется использовать библиотеки или инструменты, специально разработанные для работы с _UUID_, а не полагаться исключительно на регулярные выражения.

### Интересные факты
1. _UUID_ имеет вероятность коллизии _1_ из _2^122_ (приблизительно _5,3 x 10^36_);
2. _UUID_ можно использовать для отслеживания изменений данных и обеспечения целостности;
3. _GUID_ является синонимом _UUID_;
4. Использование _MAC-адреса_ означает, что всегда можно отследить компьютер, который создал _UUID_. Иногда возможно найти компьютер, на котором был создан или отредактирован какой-либо документ, если используемый текстовый процессор встроил _UUID_ в файл. Эта дыра в конфиденциальности использовалась для поиска автора вируса [Melissa](https://ru.wikipedia.org/wiki/Melissa_(%D0%BA%D0%BE%D0%BC%D0%BF%D1%8C%D1%8E%D1%82%D0%B5%D1%80%D0%BD%D1%8B%D0%B9_%D0%B2%D0%B8%D1%80%D1%83%D1%81)).